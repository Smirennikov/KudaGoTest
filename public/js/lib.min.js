"use strict";!function(){var c,e,t=new XMLHttpRequest,n=document.querySelector(".initial-screen"),s=((e=document.createElement("section")).className="section kudaGo-section-events container active",n.after(e),e),r=function(e){var t=document.createElement("div"),n=document.createElement("h3"),i=document.createElement("button"),a=document.createElement("p"),r=document.createElement("p"),o=document.createElement("p");t.className="kudaGo-event flex",i.className="button kudaGo-event__button-favorite",i.innerHTML="Добавить в избранное",n.innerHTML=c[e].title,a.innerHTML=c[e].description,r.innerHTML=c[e].price,o.innerHTML=c[e].type,t.appendChild(n),t.appendChild(a),t.appendChild(r),t.appendChild(o),t.appendChild(i),s.appendChild(t)},i=function(){for(var e=document.querySelectorAll(".kudaGo-event__button-favorite"),t=e.length,n=0;n<t;n+=1)"favorite"===localStorage.getItem(e[n].parentNode.querySelector("h3").innerHTML)?(e[n].classList.add("favorite"),e[n].innerHTML="В избранном"):(e[n].classList.remove("favorite"),e[n].innerHTML="Добавить в избранное"),e[n].addEventListener("click",function(){var e=this.parentNode.querySelector("h3").innerHTML;this.classList.toggle("favorite"),"button kudaGo-event__button-favorite favorite"===this.getAttribute("class")?(this.innerHTML="В избранном",localStorage.setItem(e,"favorite")):(this.innerHTML="Добавить в избранное",localStorage.removeItem(e,"favorite"))})};function a(e){for(var t=c.length,n=0;n<t;n+=1)c[n].type===e&&(r(n),i())}function o(e){for(var t=c.length,n=0;n<t;n+=1)c[n].title===e&&(r(n),i())}function l(e){for(var t=c.length,n=0;n<t;n+=1)e(n);i()}t.open("GET","/data.json",!1),t.send(),4===t.readyState&&(c=t.responseText,c=JSON.parse(c),l(r),function(){for(var t=document.querySelectorAll(".kudaGo-form .button"),e=t.length,n=0;n<e;n+=1)t[n].addEventListener("click",function(e){e.preventDefault(),"Концерты"===this.innerHTML?(t[1].classList.remove("active"),this.classList.toggle("active"),"button active"===this.getAttribute("class")?(s.innerHTML="",a("concert")):(s.innerHTML="",l(r))):"Выставки"===this.innerHTML&&(t[0].classList.remove("active"),this.classList.toggle("active"),"button active"===this.getAttribute("class")?(s.innerHTML="",a("exhibition")):(s.innerHTML="",l(r)))})}(),function(){for(var n=document.querySelectorAll(".kudaGo-tabs .tab"),i=document.querySelector(".kudaGo-form"),a=document.querySelector(".section"),e=n.length,t=0;t<e;t+=1)n[t].addEventListener("click",function(){if(this.classList.toggle("active"),"Избранные события"===this.innerHTML){n[0].classList.remove("active"),n[1].classList.add("active"),i.style.display="none",a.innerHTML="";for(var e=0,t=c.length;e<t;e+=1)"favorite"===localStorage.getItem(c[e].title)&&o(c[e].title)}else"Поиск событий"===this.innerHTML&&(i.style.display="block",n[1].classList.remove("active"),n[0].classList.add("active"),a.innerHTML="",l(r))})}())}();